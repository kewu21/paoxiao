var emptyShout=["\u6ca1\u6709\u5b57\u4f60\u8ba9\u6211\u600e\u4e48\u5486\u54ee\u963f\uff01\uff01\uff01\u4ee5\u4e3a\u6211\u5c3c\u739b\u662f\u673a\u5668\u732b\u963f\uff01\uff01\uff01\uff01","\u6559\u4e3b\u9762\u5bf9\u4e00\u7247\u7a7a\u767d\u7684\u8f93\u5165\u6846\u8868\u793a\u538b\u529b\u5f88\u5927\u6709\u6728\u6709\uff01\uff01\uff01","\u597d\u6b79\u5199\u51e0\u4e2a\u5b57\u5427\uff01\uff01\uff01\u6ca1\u6709\u5b57\u6211\u600e\u4e48\u5486\u54ee\u554a\u554a\u554a\uff01\uff01\uff01","\u8fd9\u8d27\u5486\u54ee\u7684\u65f6\u5019\u4e0d\u5199\u5b57\u6709\u6ca1\u6709\uff01\uff01\u718a\u5b69\u5b50\u633a\u4f1a\u73a9\u554a\u554a\uff01\uff01"],
TARGET_CHAR=["\u3002","\uff0c",".",",","\uff1b",";","!","\uff01","\n"],SW=[["\u4ec0\u4e48","\u795e\u9a6c"],["\u4f60\u5988","\u5c3c\u739b"],["\u6ca1\u6709","\u6728\u6709"],["\u600e\u4e48","\u80bf\u4e48"],["\u6211","\u52b3\u8d44"],["\u6211\u4eec","\u52b3\u8d44"]],output=[],finalString="",textToPaste="",retweetBtn=$(".retweet"),userComposed=false,contentChanged=false,contentEle=$("#content");
$(document).ready(function(){var a=Math.floor(Math.random()*10).toString();$.get("default_txt/text"+a+".txt",function(b){contentEle.val(b);contentEle.attr("disabled","")});$("#successIfno").css("display")!="none"&&$("#successInfo").hide(2E3)});contentEle.focus(function(){if(!userComposed){userComposed=true;contentEle.val("")}});contentEle.change(function(){contentChanged=true});
$(".genButton").click(function(){if(contentChanged){$("#output").hide();contentChanged=false}if(contentEle.val()==""){$("#output").html(emptyShout[Math.floor(Math.random()*emptyShout.length)]);$("#output").show();retweetBtn.hide();$("#secondGen").hide()}else{paoxiao(contentEle.val().replace(/^\s+|\s+$/g,""));$("#output").show("slow");textToPaste="";for(var a=$("#output").find("p"),b=0;b<a.length;b++)textToPaste+=a[b].innerHTML.replace(/^\s+|\s+$/g,"")+"\r\n";retweetBtn.show();$("#secondGen").show();
$("#toClipboard").zclip({path:"ZeroClipboard.swf",copy:textToPaste})}});function paoxiao(a){finalString="";output=process(a);for(a=0;a<output.length;a++)finalString+="<p>"+output[a]+"</p>";$("#output").find("p").empty();$("#output").html(finalString)}
function makeFun(a){a.replace(/^\s+|\s+$/g,"");if(Math.random()*10<1){var b=Math.floor(Math.random()*a.length);a=a.substring(0,b)+"\u6ce5\u9a6c"+a.substring(b,a.length)}else if(Math.random()*10<2)a="\u5c3c\u739b"+a;if(Math.random()*10<1)a+=randomShot("\u554a",1,5);if(Math.random()*10<3){a+="\u6709\u6728\u6709"+randomShot("\uff01",3,6);if(Math.random()*10<3)a+="\u4eb2"+randomShot("\uff01",3,6)}for(b=SW.length;b--;)a=a.replace(SW[b][0],SW[b][1]);a+=randomShot("\uff01",3,10);return a}
function process(a){for(var b=[],c=0,d=0;d<a.length;d++)if($.inArray(a.charAt(d),TARGET_CHAR)!=-1)if(d-c>5||d==a.length-1){var e=a.substring(c,d);if(c!=0)e=e.substring(1,e.length);c=d;b.push(makeFun(e))}if(c<a.length-1){a=a.substring(c,a.length);if(c!=0)a=a.substring(1,a.length);a=makeFun(a.replace(/^\s+|\s+$/g,""));b.push(a)}b[b.length-1]+=randomShot("\uff01",5,10);if(Math.random()*10<3)b.push("\u4eb2\uff0c\u5305\u90ae\u54e6\u4eb2"+randomShot("\uff01",5,10));else Math.random()*10<3&&b.push("\u4f60\u4f24\u4e0d\u8d77"+
randomShot("\u554a",1,5)+randomShot("\uff01",5,10));return b}function randomShot(a,b,c){b=Math.floor(Math.random()*(c-b))+b;c="";for(var d=0;d<b;d++)c+=a;return c};
