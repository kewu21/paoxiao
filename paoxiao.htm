<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
By Leon, Zeke, DiamRem 新浪微薄：@LeonV2，@赵望野
-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="咆哮体生成器, 咆哮, 咆哮体, 伤不起, 景涛, 马景涛, 有木有, 尼玛, 肿么" />
<meta name="descpriction" content="咆哮体生成器" />
<title>咆哮体生成器</title>
<style type="text/css">
<!--
a {
	text-decoration:none;
	color:#580
}
a:hover {
	text-decoration: underline;
}
#warp {
	width: 1000px;
	margin: 0 auto;
	font-family: 微软雅黑;
}
#content {
	width: 1000px;
	height: 200px;
	margin-top: 10px;
	margin-bottom: 10px;
}
h1 {
	color: #580;
	display: block;
	margin-bottom: 0;
}
.genButton,.toclipboard {
	height: 30px;
	margin: 10px 0 10px 0;
}
#secondGen{
	display:none;
}
#output {
	display:none;
}
#contact {
	display: block;
	float: left;
	font-size: 12px;
	color: #777;
}
#share {
	float: right;
}
#share img {
	border-style:none;
	width: 20px;
	height: 20px;
	padding: 0 5px 0 5px;
}
.toclipboard {
	height: 30px;
	display:none
}
#hint{
	font-size:13px;
	display: block;
	float: left;
}
</style> 
<script type="text/javascript">

	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-15427977-1']);
	_gaq.push(['_trackPageview']);

	(function() {
	var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();

</script>
</head>
<body>
<div id="warp">
	<h1><span style="font-size: 60px;">咆哮体</span>生成器</h1><a id="hint" target="_blank" href="http://www.douban.com/group/taotaopaoxiao/">神马是咆哮体？</a>
	<div style="clear: both"></div>
	<br />
		<span>请输入要咆哮的文字&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			<a target="_blank" href="http://douban.com/online/10763106/">看看其他人的咆哮</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			<a target="_blank" href="http://t.sina.com.cn/k/%25E5%2592%2586%25E5%2593%25AE%25E4%25BD%2593%25E7%2594%259F%25E6%2588%2590%25E5%2599%25A8">新浪围脖上的咆哮</a></span>
		<span id="share">
			<a href="javascript:void(function(){var d=document,e=encodeURIComponent,s1=window.getSelection,s2=d.getSelection,s3=d.selection,s=s1?s1():s2?s2():s3?s3.createRange().text:'',r='http://www.douban.com/recommend/?url='+e(d.location.href)+'&title='+e(d.title)+'&sel='+e(s)+'&v=1',x=function(){if(!window.open(r,'douban','toolbar=0,resizable=1,scrollbars=yes,status=1,width=450,height=330'))location.href=r+'&r=1'};if(/Firefox/.test(navigator.userAgent)){setTimeout(x,0)}else{x()}})()"><img src="http://img2.douban.com/pics/fw2douban_s.png" alt="推荐到豆瓣" title="推荐到豆瓣"/></a>
			<a title="新浪微博分享" href="javascript:(function(){window.open ('http://v.t.sina.com.cn/share/share.php?title='+encodeURIComponent('#'+document.title+'# '+'生成的给力咆哮文：“'+textToPaste.substring(0,40)+'...！！”  一起来咆哮吧！！ @咆哮体生成器')+'&url='+encodeURIComponent (location.href)+'&source=bookmark','_blank','width=450,height=400');})()"><img border="0" title="新浪微博分享" alt="分享到新浪微薄" src="http://t.sina.com.cn/favicon.ico" /></a>
			<a href="javascript:void((function(s,d,e){if(/renren\.com/.test(d.location))return;var f='http://share.renren.com/share/buttonshare?link=',u=d.location,l=d.title,p=[e(u),'&title=',e(l)].join('');function%20a(){if(!window.open([f,p].join(''),'xnshare',['toolbar=0,status=0,resizable=1,width=626,height=436,left=',(s.width-626)/2,',top=',(s.height-436)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent))setTimeout(a,0);else%20a();})(screen,document,encodeURIComponent));" title="分享到人人"><img src="http://a.xnimg.cn/imgpro/share/share-tinybtn.png" title="分享到人人"/></a>
		</span>
		<div style="clear: both"></div>
  		<div><textarea id="content" disabled="disabled" cols="60" rows="5">... ...</textarea></div>
  		<div><input id="generate" class="genButton" type="button" value="写好了，咆哮吧！！！！！！！！！！"></input>&nbsp;&nbsp;&nbsp;每次都不一样有木有！！！！！！</div>
	<hr />
	<input type="button" class="toclipboard" value="咆哮到剪贴板！！！"></input>
	<div id="output"></div>
	<input type="button" class="genButton" id="secondGen" value="再咆哮一次！！！"></input>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js" type="text/javascript"></script>
<script src="jquery.zclip.min.js" type="text/javascript"></script>
<script language="Javascript" type="text/javascript">
	var emptyShout = ["没有字你让我怎么咆哮阿！！！以为我尼玛是机器猫阿！！！！",
				"教主面对一片空白的输入框表示压力很大有木有！！！",
				"好歹写几个字吧！！！没有字我怎么咆哮啊啊啊！！！",
				"这货咆哮的时候不写字有没有！！熊孩子挺会玩啊啊！！"]
	var TARGET_CHAR = ["。","，",".",",","；",";","!","！","\n"];
	var SW = [["什么","神马"],["你妈","尼玛"],["没有","木有"],["怎么","肿么"],["我","劳资"],["我们","劳资"]];
	var output = [];
	var finalString = "";
	var textToPaste = ""
	var clipboardBtn = $(".toclipboard");
	var userComposed = false
	var contentChanged = false
	$(document).ready(function(){
		var index = Math.floor(Math.random()*5).toString()
		//alert(index)
		$.get("text"+index+".txt", function(data){
			//alert("ddd"+data);
			$("#content").val(data);
			$("#content").attr("disabled","")
		})
	})
	$("#content").focus(function(){
		if (!userComposed){
			userComposed = true
			$("#content").val("")
		}
	})
	$("#content").change(function(){
		contentChanged = true;
	})
	$(".genButton").click(function(){
		if (contentChanged){
			$("#output").hide()
			contentChanged = false
		}
		if ($("#content").val() == ""){
			$("#output").html(emptyShout[Math.floor(Math.random()*emptyShout.length)])
			$("#output").show()
			clipboardBtn.hide()
			$("#secondGen").hide();
		}else{
			paoxiao($("#content").val().replace(/^\s+|\s+$/g, ""));
			$("#output").show("slow")
			textToPaste = ""
			var clip = $("#output").find("p");
			for (var i = 0; i < clip.length ;i++ ) {
				textToPaste += clip[i].innerHTML.replace(/^\s+|\s+$/g, "") + "\r\n";
			}
			clipboardBtn.show();
			$("#secondGen").show();
			clipboardBtn.zclip({
				path:"ZeroClipboard.swf",
				copy:textToPaste
			})
		}
	});

	function paoxiao(source) {
		finalString = "";
		output = process(source);
		for (var i = 0; i < output.length; i++ ) {
			finalString += "<p>" + output[i] +  "</p>"  
		}
		$("#output").find("p").empty();
		$("#output").html(finalString);
		
	}

	function makeFun(source) {
		source.replace(/^\s+|\s+$/g, "");
		if (Math.random() * 10 < 1) {
			var target = Math.floor(Math.random() * source.length);
			source = source.substring(0, target) + "泥马" + source.substring(target, source.length);
		} else if (Math.random() * 10 < 2) {
			source = "尼玛" + source;
		}
		if (Math.random()*10 < 1) {
			source += randomShot("啊", 1, 5);
		}
		if (Math.random()*10 < 3) {
			source += "有木有" + randomShot("！", 3, 6);
			if (Math.random()*10 < 3) {
				source += "亲" + randomShot("！", 3, 6);
			}
		}
		for (var i = SW.length; i--;) {
			var old = SW[i][0];
			var _new = SW[i][1];
			source = source.replace(old, _new);
		}
		source += randomShot("！", 3, 10);
        return source;	
	}
	function process(source) {
    	var l = [];
		var p = 0;
		for (var i = 0; i < source.length; i++ ){
			if ($.inArray(source.charAt(i),TARGET_CHAR) != -1) {
    			if ((i-p) > 5 || i == source.length -1) {
                    var s = source.substring(p, i);
                    if (p != 0) {
						s = s.substring(1, s.length);
					}
                    p = i;
                    l.push(makeFun(s));
				}
			}
		}
		if (p < source.length - 1) {
			source = source.substring(p, source.length);
            if (p != 0) {
				source = source.substring(1, source.length);
			}
			source = makeFun(source.replace(/^\s+|\s+$/g, ""));
			l.push(source);
		}
        l[l.length - 1] += randomShot("！", 5, 10);	
		if (Math.random()*10 < 3) {
			l.push("亲，包邮哦亲" + randomShot("！", 5, 10));	
		}else if (Math.random()*10 < 3) {
			l.push("你伤不起" + randomShot("啊", 1, 5)+randomShot("！", 5, 10));	
		}

		return l;
	}
	function randomShot(s, min, max) {
		var range = Math.floor(Math.random()*(max - min)) + min;
		var result = "";
		for (var i = 0; i < range ; i++) {
			result += s;
		}
		return result;
	}
</script>
</body>
</html>
